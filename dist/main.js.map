{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./src/common/GenericButton.js","webpack:///./src/common/ItemButton.js","webpack:///./src/common/StateTransitionButton.js","webpack:///./src/common/TitleText.js","webpack:///./src/common/constants.js","webpack:///./src/common/gitButton.js","webpack:///./src/index.js","webpack:///./src/states/about-state.js","webpack:///./src/states/asset-load-state.js","webpack:///./src/states/creatureConstants.js","webpack:///./src/states/entry-state.js","webpack:///./src/states/font-load-state.js","webpack:///./src/states/game-over-state.js","webpack:///./src/states/instructions-state.js","webpack:///./src/states/instructions-state2.js","webpack:///./src/states/instructions-state2_5.js","webpack:///./src/states/instructions-state3.js","webpack:///./src/states/instructions-state4.js","webpack:///./src/states/play-state.js","webpack:///./src/states/storeMenu.js","webpack:///./src/states/victory-state.js"],"names":["GenericButton","game","x","y","btnName","callback","genericButton","add","text","ButtonStyle","anchor","setTo","inputEnabled","events","onInputUp","onInputOver","alpha","onInputOut","ItemButton","itemButton","StateTransitionButton","state","length","i","start","titleStyle","BaseStyle","fontSize","align","TitleText","contents","set","FONT_COLOR","font","fill","DescriptionStyle","MARGIN","ITEM_MAP","icon","descr","cost","GitButton","link","window","open","Phaser","Game","AUTO","undefined","entryState","aboutState","instructionsState","instructionsState2","instructionsState2_5","instructionsState3","instructionsState4","gameOverState","assetLoadState","fontLoadState","victoryState","textCrawlStyle","wordWrap","wordWrapWidth","width","textCrawl","create","aboutText","preload","load","image","spritesheet","audio","CREATURE_NAMES","DONKEY","FAIRY","GNOME","UNICORN","PHOENIX","IMP","GOBLIN","BASE_ENEMY","turnProb","knockbackVelocityX","knockbackVelocityY","flier","altitude","minDistance","name","price","baseSpeed","baseHealth","baseSpawnRate","CREATURE_LIST","CREATURE_NAME_MAP","forEach","creature","CreatureConstants","TITLE_Y","init","update","fontsLoaded","global","WebFontConfig","active","time","Timer","SECOND","google","families","script","instructionsText","nextButton","generatedText","keyDescriptionMap","Object","keys","key","donkeySprite","frame","donkeyY","sprite","animations","playState","BAG_X","BAG_Y","bagSprite","bagOverlaySprite","row","creatureProps","creatureName","height","fixedToCamera","COIN_Y","COIN_X","coinSprite","play","HEART_Y","storeSprite","col","ICON_X","ICON_Y","itemName","itemProps","GRAVITY","BOUNCE","GOLD_TO_WIN","hasBoughtBubble","GROUND_LEVEL","HEALTH_BAR_X","HEALTH_BAR_Y","COIN_STAT_X","COIN_STAT_Y","STORE_X","STORE_Y","STORE_RADIUS","ITEM_X","ITEM_Y","level","cursors","groundPlatform","shrek","swampBubble","SHREK_BASE_SPEED","SHREK_BASE_JUMP_SPEED","SHREK_KNOCKBACK_TIME","SHREK_KNOCKBACK_SPEED","actionSprites","actionArmFromRight","actionSpriteProps","speed","collisionCheckFunction","checkChopCollision","checkNetCollision","coinIcon","coinText","heartGroup","iconBag","creatureCountText","isShrekActing","doubleJumped","jumpKeyWasPressed","storeUI","choiceLabel","enemies","enemiesSold","timeSinceEnemySpawn","CAPTURABLE_DURATION","storePurchaseSound","storePurchaseDenied","netCaptureSound","bubbleGetSound","bubbleBounceSound","bubblePopSound","fartSound","hitSound","hitBigSound","loserFartSound","musicIntro","musicLoop","isShrekFacingLeft","bouncing","isStoreOpen","gold","inventory","inventoryDisplay","capturedCreatures","creatureCounts","health","SPACE_BAR","ACTION_KEY","NET_KEY","emitterManager","fairieDustEmitter","world","setBounds","stage","disableVisibilityChange","input","keyboard","createCursorKeys","addBackgroundScenery","getLevelFromEnemiesSold","addEnemies","addShrek","addActionSprites","physics","startSystem","Physics","ARCADE","camera","follow","Camera","FOLLOW_LOCKON","addStatOverlay","addKey","Keyboard","SPACEBAR","onUp","toggleStore","A","animateAction","S","createInventory","onStop","addOnce","initSpawnTimeMap","updateShrek","updateEnemies","updateShrekAction","updateStatOverlay","actionName","items","group","enableBody","ground","body","immovable","store","scale","arcade","enable","bounce","gravity","collideWorldBounds","hitTimer","addSwampBubble","spriteName","spriteProps","actionSprite","animationName","actionAnim","onComplete","collidedEnemies","spawnEnemy","enemyTemplate","enemy","randomSpawnX","direction","template","pauseTimer","capturableTimer","push","rand","Math","random","denormalized","spawnX","addForegroundScenery","imageName","n","Date","getMilliseconds","treeX","treeY","treeImage","destroy","createStore","menuContainer","StoreMenu","sellButtonCoords","camera_izeCoordinates","sellButton","hasBoughtAllItems","closeButtonCoords","closeButton","coords","itemDesc","itemCost","validatePurchase","itemDescr","item","coinCoords","heart","bagCoords","iconBagOverlay","children","getChildAt","visible","itemIcon","emitter","makeParticles","flow","collide","velocity","reanchorActionSprites","updateKnockedBackSprite","updateShrekNormal","getShrekRunSpeed","isOnGround","left","isDown","flipShrek","right","up","touching","down","currentDown","lastDown","overlap","onShrekHit","tint","updateCapturableEnemy","enemyName","timeSinceSpawn","enemyProps","destroyEnemy","getEnemySpeedFromLevel","flipSpriteDirection","actionSpriteName","anchorActionSprite","knockbackSprite","stop","adversary","kbX","kbY","velocityX","velocityY","frameWidth","currentFrame","xPercent","anim","armAnchor","getShrekActionAnchor","anchorX","anchorY","net","netSprite","includes","foundCollision","Rectangle","intersects","getBounds","isBigFist","chop","chopSprite","hadZeroHealth","damageDealt","splice","indexOf","bmd","bitmapData","ctx","beginPath","rect","fillStyle","bringToTop"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import {FONT_COLOR, ButtonStyle} from \"../common/constants\";\n\n// instance of the game, x coordinate, y coordinate, button display text, and state to move to\nconst GenericButton = (game, x, y, btnName, callback) => {\n    const genericButton = game.add.text(x, y, btnName, ButtonStyle);\n    genericButton.anchor.setTo(0,0);\n    genericButton.inputEnabled = true;\n    genericButton.events.onInputUp.add(callback);\n    genericButton.events.onInputOver.add((( ) => {\n        genericButton.alpha = .5;\n    }), this);\n    genericButton.events.onInputOut.add(() => {\n        genericButton.alpha = 1;\n    }, this);\n\n    return genericButton;\n};\n\nexport default GenericButton;","import {FONT_COLOR, ButtonStyle} from \"../common/constants\";\n\n// instance of the game, x coordinate, y coordinate, button display text, and state to move to\nconst ItemButton = (game, x, y, btnName, callback) => {\n    const itemButton = game.add.text(x, y, btnName, ButtonStyle);\n    /*itemButton.setTextBounds(x, y, 100, 100);\n    itemButton.style.align = \"left\";\n    itemButton.style.boundsAlignH = \"left\";\n    itemButton.style.boundsAlignV = \"top\";*/\n    itemButton.inputEnabled = true;\n    itemButton.events.onInputUp.add(callback);\n    itemButton.events.onInputOver.add((( ) => {\n        itemButton.alpha = .5;\n    }), this);\n    itemButton.events.onInputOut.add(() => {\n        itemButton.alpha = 1;\n    }, this);\n\n    return itemButton;\n};\n\nexport default ItemButton;","import {FONT_COLOR, ButtonStyle} from \"../common/constants\";\nimport GenericButton from \"./GenericButton\";\n\n// instance of the game, x coordinate, y coordinate, button display text, and state to move to\nconst StateTransitionButton = (game, x, y, btnName, ...state) => {\n    return GenericButton(game, x, y, btnName, () => {\n        if (state.length > 1) {\n            for(let i = 0; i < state.length; i++) {\n                game.state.start(state[i]);\n            }\n        } else {\n            game.state.start(state[0]);\n        }\n    });\n};\n\nexport default StateTransitionButton;","import {BaseStyle} from \"./constants\";\n\nlet titleStyle = {...BaseStyle, fontSize: '48px'};\ntitleStyle.align = 'center';\n\nexport default function TitleText(game, x, y, contents) {\n    let text = game.add.text(x, y, contents, titleStyle);\n    text.anchor.set(0.5);\n}","export const FONT_COLOR = \"#589b00\";\nexport const BaseStyle = {font: 'Gloria Hallelujah', fill: FONT_COLOR, align: 'left'};\nexport const ButtonStyle = { ...BaseStyle,  fontSize: '32px' };\nexport const DescriptionStyle = { ...BaseStyle, fontSize: '18px' };\nexport const MARGIN = 24;\nexport const ITEM_MAP = {\n    \"Speed\": {icon: \"speedIcon\" , descr: \"Doubles movement speed\", cost: 40},\n    \"Swamp Bubble\": {icon: \"swampBubbleIcon\" , descr: \"Takes one free hit & adds bounce ability\", cost: 40},\n    \"Fart in a Jar\": {icon: \"fartJarIcon\" , descr: \"Adds double-jump ability\", cost: 60},\n    \"Big Onion\": {icon: \"bigFistIcon\" , descr: \"Higher damage and knock back\", cost: 80},\n    \"Fairie Dust\": {icon: \"fairieDustIcon\" , descr: \"Slows fall speed\", cost: 100},\n};\n","import {FONT_COLOR, ButtonStyle} from \"../common/constants\";\nimport GenericButton from \"./GenericButton\";\n\nconst GitButton = (game, x, y, btnName, link) => {\n    GenericButton(game, x, y, btnName, () => {\n        window.open(link);\n    });\n};\n\nexport default GitButton;","import entryState from \"./states/entry-state\";\nimport aboutState from \"./states/about-state\";\nimport instructionsState from \"./states/instructions-state\";\nimport instructionsState2 from \"./states/instructions-state2\";\nimport instructionsState2_5 from \"./states/instructions-state2_5\";\nimport instructionsState3 from \"./states/instructions-state3\";\nimport instructionsState4 from \"./states/instructions-state4\";\nimport gameOverState from \"./states/game-over-state\";\nimport assetLoadState from \"./states/asset-load-state\";\nimport fontLoadState from \"./states/font-load-state\";\nimport victoryState from \"./states/victory-state\";\n\nvar game = new Phaser.Game(640, 512, Phaser.AUTO, Phaser.AUTO, 'game', undefined, undefined, false);\ngame.state.add(\"Entry\", entryState(game));\ngame.state.add(\"About\", aboutState(game));\ngame.state.add(\"Instructions\", instructionsState(game));\ngame.state.add(\"Instructions2\", instructionsState2(game));\ngame.state.add(\"Instructions2.5\", instructionsState2_5(game));\ngame.state.add(\"Instructions3\", instructionsState3(game));\ngame.state.add(\"Instructions4\", instructionsState4(game));\ngame.state.add(\"GameOver\", gameOverState(game));\ngame.state.add(\"AssetLoad\", assetLoadState(game));\ngame.state.add(\"FontLoad\", fontLoadState(game));\ngame.state.add(\"Victory\", victoryState(game));\ngame.state.start(\"FontLoad\");","import {FONT_COLOR} from \"../common/constants\";\nimport StateTransitionButton from \"../common/StateTransitionButton\";\nimport GitButton from \"../common/gitButton\";\nexport default function aboutState(game) {\n\n    let textCrawlStyle = { font: '15px Gloria Hallelujah', fill: FONT_COLOR, align: 'left', wordWrap: true, wordWrapWidth: game.width-60};\n    let textCrawl = 'About\\n\\n'\n                    + 'Original story, art, music, and gameplay developed by libjared, scottyseus, \\njronsomers, and endlessDreamHero  for'\n                    + ' Ludum Dare Jam 44.\\n\\n'\n                    + 'Check out the links below:\\n\\n';\n\n    return {\n        create: function() {\n            StateTransitionButton(game, 60, 30, '< Back', \"Entry\");\n            GitButton(game, 60, 250, '> scottyseus on GitHub <', \"https://github.com/scottyseus/shrekunknowns-battleswamps\");\n            GitButton(game, 60, 290, '> libjared on GitHub <', \"https://github.com/libjared\");\n            GitButton(game, 60, 330, \"> jronsomers GitHub\", \"https://github.com/jronSomers\");\n            GitButton(game, 60, 370, '> Ludum Dare page <', \"https://ldjam.com/events/ludum-dare/44/shrekunknowns-battleswamps\");\n\n            const aboutText = game.add.text(60, 90, textCrawl, textCrawlStyle);\n        }\n    };\n};","export default function assetLoadState(game) {\n\n    function preload() {\n        game.load.image('ground', 'src/assets/ground.png');\n        game.load.image('groundTop', 'src/assets/groundTop.png');\n        game.load.spritesheet('shrek', 'src/assets/shrek.png', 126/3, 72);\n        game.load.spritesheet('donkey', 'src/assets/donkey.png', 192/4, 48);\n        game.load.spritesheet('unicorn', 'src/assets/unicorn.png', 92, 82);\n        game.load.spritesheet('gnome', 'src/assets/gnome.png', 30, 50);\n        game.load.spritesheet('fairy', 'src/assets/fairy.png', 56/4, 17);\n        game.load.spritesheet('phoenix', 'src/assets/phoenix.png', 56, 56);\n        game.load.spritesheet('imp', 'src/assets/imp.png', 32, 48);\n        game.load.spritesheet('goblinWarrior', 'src/assets/goblinWarrior.png', 52, 72);\n        game.load.image('tree1', 'src/assets/tree1.png');\n        game.load.image('tree2', 'src/assets/tree2.png');\n        game.load.image('tree3', 'src/assets/tree3.png');\n        game.load.image(\"berryBush\", \"src/assets/berryBush.png\");\n        game.load.image(\"store\", \"src/assets/store.png\");\n        game.load.image(\"forestBackground\", \"src/assets/forestBackground.png\");\n        game.load.image(\"storeBackground\", \"src/assets/storeBackground.png\");\n        game.load.spritesheet(\"chop\", \"src/assets/chop.png\", 68, 90);\n        game.load.spritesheet(\"bigfist\", \"src/assets/bigfist.png\", 90, 120);\n        game.load.spritesheet(\"net\", \"src/assets/net.png\", 110, 108);\n        game.load.image(\"sky\", \"src/assets/sky.png\");\n        game.load.image(\"heart\", \"src/assets/heart.png\");\n        game.load.spritesheet(\"coin\", \"src/assets/coin.png\", 128/8, 16);\n        game.load.image(\"swampBubble\", \"src/assets/swampBubble.png\");\n        game.load.image(\"fairieDust\", \"src/assets/fairieDust.png\");\n        \n\n        // icons\n        game.load.image(\"donkeyIcon\", \"src/assets/donkeyIcon.png\");\n        game.load.image(\"fairyIcon\", \"src/assets/fairyIcon.png\");\n        game.load.image(\"gnomeIcon\", \"src/assets/gnomeIcon.png\");\n        game.load.image(\"unicornIcon\", \"src/assets/unicornIcon.png\");\n        game.load.image(\"phoenixIcon\", \"src/assets/phoenixIcon.png\");\n        game.load.image(\"impIcon\", \"src/assets/impIcon.png\");\n        game.load.image(\"goblinWarriorIcon\", \"src/assets/goblinWarriorIcon.png\");\n        game.load.image(\"iconBag\", \"src/assets/iconBag.png\");\n        game.load.image(\"iconBagOverlay\", \"src/assets/iconBagOverlay.png\");\n\n        game.load.image(\"swampBubbleIcon\", \"src/assets/swampBubbleIcon.png\");\n        game.load.image(\"fairieDustIcon\", \"src/assets/fairieDustIcon.png\");\n        game.load.image(\"bigFistIcon\", \"src/assets/bigFistIcon.png\");\n        game.load.image(\"speedIcon\", \"src/assets/speedIcon.png\");\n        game.load.image(\"fartJarIcon\", \"src/assets/fartJarIcon.png\");\n\n        // sounds\n        game.load.audio(\"net\", \"src/assets/sound/net.wav\");\n        game.load.audio(\"purchase\", \"src/assets/sound/cashreg.wav\");\n        game.load.audio(\"denied\", \"src/assets/sound/denied.wav\");\n        game.load.audio(\"bubbleGet\", \"src/assets/sound/bubbleget.wav\");\n        game.load.audio(\"bubbleBounce\", \"src/assets/sound/bubblebounce.wav\");\n        game.load.audio(\"bubblePop\", \"src/assets/sound/bubblePop.wav\");\n        game.load.audio(\"fart\", \"src/assets/sound/fart.wav\");\n        game.load.audio(\"hit\", \"src/assets/sound/hit.wav\");\n        game.load.audio(\"hitBig\", \"src/assets/sound/hit2.wav\");\n        game.load.audio(\"loserFart\", \"src/assets/sound/loserFart.wav\"); \n\n        // music\n        game.load.audio('musicIntro', 'src/assets/sound/shrek-intro.ogg');\n        game.load.audio('musicLoop', 'src/assets/sound/shrek-loop.ogg');\n    }\n\n    function create() {\n        game.state.start('Entry');\n    }\n\n    return {preload, create};\n\n}","const CREATURE_NAMES = {\n    DONKEY: \"donkey\",\n    FAIRY: \"fairy\",\n    GNOME: \"gnome\",\n    UNICORN: \"unicorn\",\n    PHOENIX: \"phoenix\",\n    IMP: \"imp\",\n    GOBLIN: \"goblinWarrior\"\n}\n\nlet BASE_ENEMY = {\n    turnProb: 0.02,\n    knockbackVelocityX: 200,\n    knockbackVelocityY: -200,\n    flier: false,\n    altitude: 0, // height above ground level\n    minDistance: 250, // minimum spawn distance from store\n};\n\nlet DONKEY = {\n    ...BASE_ENEMY,\n    name: CREATURE_NAMES.DONKEY,\n    price: 20,\n    baseSpeed: 200,\n    baseHealth: 3,\n    baseSpawnRate: 3600,\n    minDistance: 1200\n};\n\nlet FAIRY = {\n    ...BASE_ENEMY,\n    name: CREATURE_NAMES.FAIRY,\n    price: 10,\n    baseSpeed: 60,\n    baseHealth: 1,\n    baseSpawnRate: 2400,\n    flier: true,\n    altitude: 100,\n    knockbackVelocityY: 0,\n};\n\nlet UNICORN = {\n    ...BASE_ENEMY,\n    name: CREATURE_NAMES.UNICORN,\n    price: 40,\n    baseSpeed: 150,\n    baseHealth: 3,\n    baseSpawnRate: 4200,\n    minDistance: 2400\n};\n\nlet GNOME = {\n    ...BASE_ENEMY,\n    name: CREATURE_NAMES.GNOME,\n    price: 20,\n    baseSpeed: 100,\n    baseHealth: 2,\n    baseSpawnRate: 3600,\n    minDistance: 1200\n};\n\nlet PHOENIX = {\n    ...BASE_ENEMY,\n    name: CREATURE_NAMES.PHOENIX,\n    price: 60,\n    baseSpeed: 125,\n    baseHealth: 2,\n    baseSpawnRate: 4200,\n    altitude: 400,\n    flier: true,\n};\n\nlet IMP = {\n    ...BASE_ENEMY,\n    name: CREATURE_NAMES.IMP,\n    price: 10,\n    baseSpeed: 125,\n    baseHealth: 1,\n    baseSpawnRate: 2400,\n};\n\nlet GOBLIN = {\n    ...BASE_ENEMY,\n    name: CREATURE_NAMES.GOBLIN,\n    price: 40,\n    baseSpeed: 85,\n    baseHealth: 4,\n    baseSpawnRate: 4200,\n    minDistance: 2400\n};\n\nconst CREATURE_LIST = [DONKEY, FAIRY, GNOME, UNICORN, PHOENIX, IMP, GOBLIN];\nconst CREATURE_NAME_MAP = {};\n\nCREATURE_LIST.forEach((creature) => {\n    CREATURE_NAME_MAP[creature.name] = creature;\n});\n\nconst CreatureConstants = {\n    CREATURE_NAMES,\n    DONKEY,\n    UNICORN,\n    FAIRY,\n    GNOME,\n    PHOENIX,\n    IMP,\n    GOBLIN,\n    CREATURE_LIST,\n    CREATURE_NAME_MAP\n};\n\nexport default CreatureConstants;","import StateTransitionButton from \"../common/StateTransitionButton\";\nimport TitleText from '../common/TitleText';\nimport playState from \"./play-state\";\n\nconst TITLE_Y = 70;\n\nexport default function entryState(game) {\n    return {\n        preload: function() {\n        },\n\n        init: function() {\n        },\n \n        create: function() {\n            TitleText(game, game.width / 2, TITLE_Y, \"ShrekUnknown's\\nBattleSwamps\");\n\n            StateTransitionButton(game, 30,TITLE_Y + 72, \"Play\", \"Instructions\");\n            StateTransitionButton(game, 30, TITLE_Y + 72 * 2,'About', \"About\");\n        },\n\n        update: function() {\n            \n        }\n    }\n};","export default function fontLoadState(game) {\n\n    window.fontsLoaded = function() {\n        game.state.start('AssetLoad');\n    }\n\n    return {\n        preload: function() {\n            //  The Google WebFont Loader will look for this object, so create it before loading the script.\n            global.WebFontConfig = {\n\n                //  'active' means all requested fonts have finished loading\n                //  We set a 1 second delay before calling 'createText'.\n                //  For some reason if we don't the browser cannot render the text the first time it's created.\n                active: function() {\n                    game.time.events.add(Phaser.Timer.SECOND, fontsLoaded, this);\n                },\n\n                //  The Google Fonts we want to load (specify as many as you like in the array)\n                google: {\n                    families: ['Gloria Hallelujah']\n                }\n            };\n\n            //  Load the Google WebFont Loader script\n            game.load.script('webfont', '//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js');\n        }\n    };\n\n}","import { FONT_COLOR } from \"../common/constants\";\nimport StateTransitionButton from '../common/StateTransitionButton';\nimport TitleText from \"../common/TitleText\";\nexport default function gameOverState(game) {\n\n    function create() {\n        TitleText(game, game.width/2, game.width/2, 'Game Over');\n        StateTransitionButton(game, 60, 30, '< Back', \"Entry\");\n    }\n    \n    return {create};\n}","import StateTransitionButton from \"../common/StateTransitionButton\";\nimport {FONT_COLOR, ButtonStyle, DescriptionStyle} from \"../common/constants\";\nexport default function instructionsState(game) {\n    let instructionsText = 'PREMISE\\n\\n Shrek needs more gold to buy back his swamp!\\n\\n'\n                         + 'The Royal Guards are paying a pretty penny in exchange\\n for mythical Creatures...\\n\\n'\n                         + \"What's an Orge to do? Go to the would-be-king to talk?\\n\\n...Nah rounding up these things seems way easier.\\n\\n\";\n    return {\n        create: function () {\n            StateTransitionButton(game, 60, 30, '< Back', \"Entry\");\n            let nextButton = StateTransitionButton(game, game.width - 60, 30, 'Next >', \"Instructions2\");\n            nextButton.anchor.setTo(1, 0);\n            let generatedText = game.add.text(60, 90, instructionsText, DescriptionStyle);\n        }\n    };\n}","import StateTransitionButton from \"../common/StateTransitionButton\";\nimport {FONT_COLOR, ButtonStyle, DescriptionStyle} from \"../common/constants\";\nexport default function instructionsState2(game) {\n    let keyDescriptionMap = {\n        'ARROW KEYS': 'Movement.',\n        'A': 'Attack creatures.',\n        'S': 'Capture creatures.',\n        'SPACEBAR': 'Open shoppe menu (while near shoppe).'\n    };\n\n\n    let instructionsText = 'GOAL\\n\\nBuy all the items and earn 800 gold to buy back your swamp!';\n    return {\n        create: function () {\n            StateTransitionButton(game, 60, 30, '< Back', \"Instructions\");\n            let nextButton = StateTransitionButton(game, game.width - 60, 30, 'Next >', \"Instructions2.5\");\n            nextButton.anchor.setTo(1, 0);\n\n            game.add.text(60, 90, instructionsText, DescriptionStyle);\n\n            game.add.text(60, 230, \"CONTROLS\", DescriptionStyle);\n            Object.keys(keyDescriptionMap).forEach((key, i) => {\n                game.add.text(60, 280 + (i * 18), key, DescriptionStyle);\n                game.add.text(240, 280 + (i * 18), keyDescriptionMap[key], DescriptionStyle);\n            });\n        }\n    };\n}","import StateTransitionButton from \"../common/StateTransitionButton\";\nimport {FONT_COLOR, ButtonStyle, DescriptionStyle} from \"../common/constants\";\nexport default function instructionsState2(game) {\n\n    let donkeySprite;\n    let frame = 0;\n    return {\n        create: function () {\n\n            StateTransitionButton(game, 60, 30, '< Back', \"Instructions2\");\n            let nextButton = StateTransitionButton(game, game.width - 60, 30, 'Next >', \"Instructions3\");\n            nextButton.anchor.setTo(1, 0);\n\n            game.add.text(60, 90, \"COMBAT\", DescriptionStyle);\n            let donkeyY = 200;\n            donkeySprite = game.add.sprite(90, donkeyY, \"donkey\");\n            donkeySprite.animations.add(\"donkeyWalk\", [0, 1, 2, 0], 12, true);\n            game.add.text(200, 150, \"Attacking creatures damages them. Critically\\n\" +\n                                        \"damaged creatures can be captured with the\\n\" +\n                                        \"net. Creatures flash when critically damaged.\\n\" +\n                                        \"Hitting a critically damaged\\n\" +\n                                        \"creature destroys it.\", DescriptionStyle);\n        },\n        update: function() {\n            ++frame;\n            donkeySprite.alpha = frame % 4 >= 2 ? 0.1 : 1;\n            if(frame > 2000000000) {\n                frame = 0;\n            }\n        }\n    };\n}","import StateTransitionButton from \"../common/StateTransitionButton\";\nimport {FONT_COLOR, ButtonStyle, DescriptionStyle} from \"../common/constants\";\nimport playState from \"./play-state\";\nimport CreatureConstants from \"./creatureConstants\";\nexport default function instructionsState3(game) {\n    return {\n        create: function () {\n            StateTransitionButton(game, 60, 30, '< Back', \"Instructions2.5\");\n            game.state.add('Play', playState(game));\n            let nextButton = StateTransitionButton(game, game.width - 60, 30, 'Next >', \"Instructions4\");\n            nextButton.anchor.setTo(1, 0);\n            \n\n            let BAG_X = 60;\n            let BAG_Y = 90;\n\n            let bagSprite = game.add.sprite(BAG_X,BAG_Y,\"iconBag\");\n            bagSprite.alpha = 0.5;\n            let bagOverlaySprite = game.add.sprite(BAG_X,BAG_Y,\"iconBagOverlay\");\n\n            let row = 0;\n            CreatureConstants.CREATURE_LIST.forEach((creatureProps) => {\n                let creatureName = creatureProps.name;\n                let y = BAG_Y + bagSprite.height - 16 - (row * 23);\n                let x = BAG_X + 6;\n                let icon = game.add.image(x,y, creatureName + 'Icon');\n                let text = game.add.text(x + 16, y, ' x ' + 0, {font: 'Gloria Hallelujah', fill: FONT_COLOR, align: 'left', fontSize: '12px'});\n                text.anchor.setTo(0, 0.5);\n                text.fixedToCamera = true;\n                icon.anchor.setTo(0, 0.5);\n                ++row;\n            });\n            game.add.text(180, 180, \"The bag displays the number of creatures yet\\nto be sold.\", DescriptionStyle);\n\n            let COIN_Y = 340\n            let COIN_X = 60;\n            let coinSprite = game.add.sprite(COIN_X, COIN_Y, \"coin\");\n            coinSprite.animations.add('rotate', [0,1,2,3,4,5,6,7], 14, true);\n            coinSprite.animations.play('rotate');\n            game.add.text(COIN_X + 20, COIN_Y, ' x ' + 0, {font: 'Gloria Hallelujah', fill: FONT_COLOR, align: 'left', fontSize: '12px'});\n            game.add.text(180, COIN_Y, \"The coin indicates your current amount of gold.\", DescriptionStyle);\n\n            let HEART_Y = 400;\n            game.add.sprite(60, HEART_Y, 'heart');\n            game.add.text(180, HEART_Y, \"Your health is equal to the number of hearts.\", DescriptionStyle);\n        }\n    };\n}","import StateTransitionButton from \"../common/StateTransitionButton\";\nimport {ITEM_MAP, FONT_COLOR, ButtonStyle, DescriptionStyle} from \"../common/constants\";\nimport playState from \"./play-state\";\nimport CreatureConstants from \"./creatureConstants\";\nexport default function instructionsState3(game) {\n\n    return {\n        create: function () {\n            StateTransitionButton(game, 60, 30, '< Back', \"Instructions3\");\n            game.state.add('Play', playState(game));\n            let nextButton = StateTransitionButton(game, game.width - 60, 30, 'Play >', \"Play\");\n            nextButton.anchor.setTo(1, 0);\n            \n\n            let BAG_X = 60;\n            let BAG_Y = 90;\n\n            let storeSprite = game.add.sprite(BAG_X,BAG_Y,\"store\");\n            game.add.text(200, BAG_Y + storeSprite.height / 2, \"Press the space bar while standing in front\\n\" +\n                \"of the store to buy items and\\nsell creatures.\", DescriptionStyle);\n\n            let col = 0;\n            let ICON_X = 90;\n            let ICON_Y = BAG_Y + storeSprite.height +  80;\n            Object.keys(ITEM_MAP).forEach((itemName) => {\n                let itemProps = ITEM_MAP[itemName];\n                let y = ICON_Y;\n                let x = ICON_X + 18 * col;\n                let icon = game.add.image(x,y, itemProps.icon);\n                ++col;\n            });\n            game.add.text(200, ICON_Y, \"These icons at the top of your screen\\nindicate owned items. Except for Swamp Bubble,\\nall items can only be bought once.\", DescriptionStyle);\n        }\n    };\n}","import {ITEM_MAP, FONT_COLOR, MARGIN, DescriptionStyle} from \"../common/constants\";\nimport GenericButton from \"../common/GenericButton\";\nimport ItemButton from \"../common/ItemButton\";\nimport StoreMenu from \"./storeMenu\";\nimport CreatureConstants from \"./creatureConstants\";\n\nexport default function playState(game) {\n\n    const GRAVITY = 600*2;\n    const BOUNCE = 0;\n\n    const GOLD_TO_WIN = 800;\n    let hasBoughtBubble = false;\n\n    // locations\n    let GROUND_LEVEL;\n    let HEALTH_BAR_X = 10;\n    let HEALTH_BAR_Y = 10;\n    let COIN_STAT_X = 224;\n    let COIN_STAT_Y = 10;\n    let STORE_X;\n    let STORE_Y;\n    let STORE_RADIUS = 180;\n\n    let BAG_X = game.width - 82;\n    let BAG_Y = 10;\n\n    let ITEM_X = 324;\n    let ITEM_Y = 10;\n\n    // game stats\n    let level = 0;\n\n    // groups\n    let cursors;\n    let groundPlatform;\n\n    // characters\n    let shrek, swampBubble;\n    const SHREK_BASE_SPEED = 150;\n    const SHREK_BASE_JUMP_SPEED = 525;\n    const SHREK_KNOCKBACK_TIME = 45;\n    const SHREK_KNOCKBACK_SPEED = 200;\n    let actionSprites = {};\n    let actionArmFromRight = 14; // distance from shoulder socket to rightside of sprite frame\n    let actionSpriteProps = {'chop': {\n            speed: 30,\n            collisionCheckFunction: () => { checkChopCollision(false); }\n        }, \n        'net': {\n            speed: 12,\n            collisionCheckFunction: checkNetCollision\n        }, \n        'bigfist': {\n            speed: 18,\n            collisionCheckFunction: () => { checkChopCollision(true); }\n        }\n    };\n    let coinIcon, coinText, heartGroup, iconBag;\n    let creatureCountText = {};\n    let isShrekActing = false;\n    let doubleJumped = false;\n    let jumpKeyWasPressed = false;\n\n    let storeUI;\n    let choiceLabel;\n    let enemies = [];\n    let enemiesSold = 0;\n    let timeSinceEnemySpawn = {};\n    const CAPTURABLE_DURATION = 360;\n\n    let storePurchaseSound;\n    let storePurchaseDenied;\n    let netCaptureSound;\n    let bubbleGetSound;\n    let bubbleBounceSound;\n    let bubblePopSound;\n    let fartSound;\n    let hitSound;\n    let hitBigSound;\n    let loserFartSound;\n\n    let musicIntro;\n    let musicLoop;\n\n    // flags\n    let isShrekFacingLeft = true;\n    let bouncing = false;\n    let isStoreOpen = false;\n\n    // player stats\n    let gold = 0;\n    let inventory = {};\n    let inventoryDisplay = {};\n    let capturedCreatures = [];\n    let creatureCounts = {};\n    let health = 10;\n\n    // keys\n    let SPACE_BAR;\n    let ACTION_KEY;\n    let NET_KEY;\n\n    let emitterManager;\n    let fairieDustEmitter;\n\n    function preload() {\n        \n    }\n    \n    function create() {\n        GROUND_LEVEL = game.world.height - 64;\n        STORE_X = 640 * 5 + 450;\n        STORE_Y = GROUND_LEVEL - 64;\n\n        game.world.setBounds(0, 0, 6400, 512);\n        game.stage.disableVisibilityChange = true;\n        cursors = game.input.keyboard.createCursorKeys();\n        addBackgroundScenery();\n        level = getLevelFromEnemiesSold();\n        addEnemies();\n        addShrek();\n        addActionSprites();\n\n        //  We're going to be using physics, so enable the Arcade Physics system\n        game.physics.startSystem(Phaser.Physics.ARCADE);\n        game.camera.follow(shrek, Phaser.Camera.FOLLOW_LOCKON);\n\n        CreatureConstants.CREATURE_LIST.forEach((creatureProps) => {\n            creatureCounts[creatureProps.name] = 0;\n        });\n        // addForegroundScenery();\n        addStatOverlay();\n\n        SPACE_BAR = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);\n        SPACE_BAR.onUp.add(toggleStore, this);\n\n        ACTION_KEY = game.input.keyboard.addKey(Phaser.Keyboard.A);\n        ACTION_KEY.onUp.add(() => {\n            if (inventory[\"Big Onion\"] === 1)\n                animateAction('bigfist');\n            else\n                animateAction('chop');\n        }, this);\n        NET_KEY = game.input.keyboard.addKey(Phaser.Keyboard.S);\n        NET_KEY.onUp.add(() => {animateAction('net')}, this);\n        createInventory();\n        storePurchaseSound = game.add.audio(\"purchase\");\n        storePurchaseDenied = game.add.audio(\"denied\");\n        netCaptureSound = game.add.audio(\"net\");\n        bubbleGetSound = game.add.audio(\"bubbleGet\");\n        bubbleBounceSound = game.add.audio(\"bubbleBounce\");\n        bubblePopSound = game.add.audio(\"bubblePop\");\n        fartSound = game.add.audio(\"fart\");\n        hitSound = game.add.audio(\"hit\");\n        hitBigSound = game.add.audio(\"hitBig\");\n        loserFartSound = game.add.audio(\"loserFart\");\n\n        musicIntro = game.add.audio('musicIntro');\n        musicLoop = game.add.audio('musicLoop', 1, true);\n        musicIntro.onStop.addOnce(() => {\n            musicLoop.play();\n        });\n        musicIntro.play();\n\n        initSpawnTimeMap();\n    }\n    \n    \n    function update() {\n        level = getLevelFromEnemiesSold();\n        updateShrek();\n        updateEnemies();\n        updateShrekAction();\n        updateStatOverlay();\n    }\n\n    function updateShrekAction() {\n        Object.keys(actionSpriteProps).forEach((actionName) => {\n            const sprite = actionSprites[actionName].sprite;\n            if (sprite.alpha > 0.5) {\n                actionSpriteProps[actionName].collisionCheckFunction();\n            }    \n        });\n\n    }\n\n    function createInventory() {\n        const items = Object.keys(ITEM_MAP);\n        for (let i = 0; i < items.length; i++){ \n            inventory[items[i]] = 0;\n        }\n    }\n\n    function addBackgroundScenery() {\n\n        //  The groundPlatform group contains the ground and the 2 ledges we can jump on\n        groundPlatform = game.add.group();\n            \n        //  We will enable physics for any object that is created in this group\n        if (groundPlatform) {\n            groundPlatform.enableBody = true;\n        }\n\n\n        // Here we create the ground.\n        for(var i = 0; i < 65; ++i) {\n            var x = i * 256;\n            var y = GROUND_LEVEL;\n            var ground = groundPlatform.create(x, y, 'ground');\n            game.add.sprite(x, y - 32, 'groundTop');\n            ground.body.immovable = true;\n        }\n\n        // add the forest background\n        for(var i = 0; i < 10; ++i) {\n            var x = i * 640;\n            var y = game.world.height - 64 - 12- 320;\n            game.add.sprite(x, 0, 'sky');\n            if(i == 5) {\n                game.add.sprite(x, y, 'storeBackground');\n            } else {\n                game.add.sprite(x, y, 'forestBackground');\n            }\n        }\n        \n        let store = game.add.sprite(STORE_X, STORE_Y, \"store\");\n        store.scale.setTo(2);\n        store.anchor.setTo(0.5, 0.5);\n    }\n\n    function addShrek() {\n        shrek = game.add.sprite(0,0,'shrek');\n        shrek.anchor.setTo(0.5, 1);\n        shrek.x = STORE_X;\n        shrek.y = GROUND_LEVEL;\n        game.physics.arcade.enable(shrek);\n        shrek.body.bounce.y = BOUNCE;\n        shrek.body.gravity.y = GRAVITY;\n        shrek.body.collideWorldBounds = true;\n        shrek.animations.add('shrekWalk', [0, 1, 2], 10, false);\n        shrek.hitTimer = 0;\n\n        addSwampBubble();\n    }\n\n    function addSwampBubble() {\n        swampBubble = game.add.image(shrek.x, shrek.y, \"swampBubble\");\n        swampBubble.alpha = 0;\n        swampBubble.anchor.setTo(0.5, 1);\n    }\n\n    function addActionSprites() {\n\n        Object.keys(actionSpriteProps).forEach((spriteName) => {\n            let spriteProps = actionSpriteProps[spriteName];\n            let actionSprite = game.add.sprite(0, 0, spriteName);\n            actionSprite.alpha = 0;\n            let animationName = spriteName + 'Anim';\n            let actionAnim = actionSprite.animations.add(animationName, [0, 1, 2, 2, 2], spriteProps.speed, false);\n            actionAnim.onComplete.add(() => {\n                actionSprite.alpha = 0; \n                actionSprites[spriteName].collidedEnemies = []\n            }, this);\n            actionSprites[spriteName] = {\n                sprite: actionSprite,\n                animationName: animationName,\n                name: spriteName,\n                collidedEnemies: []\n            };\n        });\n    }\n\n    function addEnemies() {\n        for (let i = 0; i < 10; i++) {\n            spawnEnemy(CreatureConstants.FAIRY);\n            spawnEnemy(CreatureConstants.IMP);\n        }\n    }\n\n    function initSpawnTimeMap() {\n        CreatureConstants.CREATURE_LIST.forEach((creatureProps) => {\n            timeSinceEnemySpawn[creatureProps.name] = 0;\n        });\n    }\n\n    function spawnEnemy(enemyTemplate) {\n        let enemy = game.add.sprite(0, 0, enemyTemplate.name);\n\n        enemy.anchor.setTo(0.5, 1);\n\n        enemy.x = randomSpawnX(enemyTemplate);\n        enemy.y = GROUND_LEVEL - enemyTemplate.altitude;\n        game.physics.arcade.enable(enemy);\n        enemy.body.bounce.y = BOUNCE;\n        enemy.body.gravity.y = enemyTemplate.flier ? 0 : GRAVITY;\n        enemy.body.collideWorldBounds = true;\n        enemy.animations.add(enemyTemplate.name + 'Walk', [0, 1, 2, 0], 12, false);\n        enemy.direction = -1; // custom state\n        enemy.health = enemyTemplate.baseHealth + level;\n        enemy.name = enemyTemplate.name\n        enemy.template = enemyTemplate;\n        enemy.pauseTimer = 0;\n        enemy.capturableTimer = 0;\n        enemies.push(enemy);\n    }\n\n    function randomSpawnX(enemyTemplate) {\n        let rand = Math.random();\n        let denormalized = rand * ((game.world.width /2) - STORE_RADIUS - enemyTemplate.minDistance - 250);\n        let spawnX = rand > 0.5 ? denormalized : game.world.width - denormalized;\n        return spawnX\n    }\n\n    function addForegroundScenery() {\n        for(var i = 0; i < 12; ++i) {\n            let rand = Math.random();\n            let imageName;\n            if(rand < 0.33) {\n                imageName = 'tree1';\n            } else if(rand < 0.66) {\n                imageName = 'tree2';\n            } else {\n                imageName = 'tree3';\n            }\n            var n = new Date().getMilliseconds();\n            \n            let treeX, treeY;\n            treeX = (i*6400/40)\n\n            if(n % 2 == 0) {\n                treeX -= 13;\n                treeY = GROUND_LEVEL + 35;\n            } else {\n                treeX += 13;\n                treeY = GROUND_LEVEL + 45;\n            }\n\n            let treeImage = game.add.image(treeX, treeY, imageName);\n            treeImage.alpha = 0.75;\n            treeImage.anchor.setTo(0.5, 1);\n        }\n        game.add.sprite(150, game.world.height - 215, 'tree1');\n        game.add.sprite(400, game.world.height - 115, \"berryBush\");\n        game.add.sprite(500, game.world.height - 270, 'tree2');\n        game.add.sprite(800, game.world.height - 284, 'tree3');\n        game.add.sprite(100, game.world.height - 125, \"berryBush\");\n    }\n\n    function toggleStore() {\n        if(isStoreOpen) {\n            storeUI.destroy();\n            isStoreOpen = false;\n            return;\n        }\n        if (shrek.x <= STORE_X + STORE_RADIUS && shrek.x >= STORE_X - STORE_RADIUS && !isStoreOpen) {\n            createStore();\n            isStoreOpen = true;\n        }\n    \n    }\n\n    function createStore() {\n        storeUI = game.add.group();\n\n        // Then add the menu\n        let menuContainer = StoreMenu(game);\n        storeUI.add(menuContainer);\n\n        let sellButtonCoords = camera_izeCoordinates(game.width - (MARGIN * 2),\n            game.height - (MARGIN * 2));\n        let sellButton = GenericButton(game, sellButtonCoords.x, \n            sellButtonCoords.y, 'SELL CREATURES', () => {\n                capturedCreatures.forEach((creature, i) => {\n                    let creatureName = creature.name;\n                    gold += creature.price;\n                    enemiesSold++;\n                    delete capturedCreatures[i];\n                    storePurchaseSound.play();\n                    creatureCounts[creatureName] = 0;\n                    if(gold >= GOLD_TO_WIN && hasBoughtAllItems()) {\n                        game.state.start(\"Victory\");\n                    }\n                });\n                capturedCreatures = [];\n            });\n        sellButton.anchor.setTo(1, 0.5);\n        storeUI.add(sellButton);\n\n        let closeButtonCoords = camera_izeCoordinates(game.width - (MARGIN * 2), MARGIN * 2);\n        let closeButton = GenericButton(game, closeButtonCoords.x, \n            closeButtonCoords.y-32, 'X', () => {storeUI.destroy(); isStoreOpen = false;});\n        closeButton.anchor.setTo(0, 0);\n        storeUI.add(closeButton);\n        let y = MARGIN;\n        const items = Object.keys(ITEM_MAP);\n        let coords = camera_izeCoordinates(MARGIN * 2, y);\n        for(var i = 0; i < items.length; ++i) {\n            let itemName = items[i];\n            const itemDesc = ITEM_MAP[items[i]].descr;\n            let itemCost = ITEM_MAP[items[i]].cost;\n            let itemButton = ItemButton(game, coords.x, coords.y, itemName, () => {\n                // ensure player has enough currency to buy this item\n                if (validatePurchase(ITEM_MAP[itemName], itemName)) {\n                    inventory[itemName]+= 1;\n                    gold-= ITEM_MAP[itemName].cost;\n                    if (itemName === \"Swamp Bubble\") {\n                        bubbleGetSound.play();\n                        hasBoughtBubble = true;\n                    } else {\n                        storePurchaseSound.play();\n                    }\n                } else {\n                    storePurchaseDenied.play();\n                }\n            });\n            storeUI.add(itemButton);\n\n            let itemDescr = game.add.text(coords.x+25, coords.y+45, itemDesc + \" ($\" + itemCost  + \")\", DescriptionStyle);\n            storeUI.add(itemDescr);\n            coords.y += (MARGIN*3);\n        }\n    }\n\n    function validatePurchase(item, itemName) {\n        return item && item.cost <= gold && inventory[itemName] === 0;\n    }\n\n    function addStatOverlay() {\n        heartGroup = game.add.group();\n\n        // add coins\n        let coinCoords = camera_izeCoordinates(COIN_STAT_X, COIN_STAT_Y);\n        coinIcon = game.add.sprite(coinCoords.x, coinCoords.y,'coin');\n        coinIcon.animations.add('rotate', [0,1,2,3,4,5,6,7], 14, true);\n        coinIcon.animations.play('rotate');\n        coinIcon.anchor.setTo(0,0);\n        coinIcon.fixedToCamera = true;\n        \n        coinText = game.add.text(coinCoords.x + 20, coinCoords.y, ' x ' + gold + \"/\" + GOLD_TO_WIN, {font: 'Gloria Hallelujah', fill: FONT_COLOR, align: 'left', fontSize: '12px'});\n        coinText.fixedToCamera = true;\n\n        // add hearts\n        for(let i = 0; i < health; ++i) {\n            let coords = camera_izeCoordinates(HEALTH_BAR_X + 18 * i, HEALTH_BAR_Y);\n            let heart = game.add.sprite(coords.x, coords.y, 'heart');\n            heart.fixedToCamera = true;\n            heart.anchor.set(0,0);\n            heartGroup.add(heart);\n        }\n\n        // add captured creatures\n        let bagCoords = camera_izeCoordinates(BAG_X, BAG_Y)\n        iconBag = game.add.image(bagCoords.x, bagCoords.y, \"iconBag\");\n        iconBag.anchor.setTo(0,0);\n        iconBag.fixedToCamera = true;\n        iconBag.alpha = 0.7\n        let iconBagOverlay = game.add.image(bagCoords.x, bagCoords.y, \"iconBagOverlay\");\n        iconBagOverlay.anchor.setTo(0,0);\n        iconBagOverlay.fixedToCamera = true;\n        \n        let row = 0;\n        CreatureConstants.CREATURE_LIST.forEach((creatureProps) => {\n            let creatureName = creatureProps.name;\n            let y = BAG_Y + iconBag.height - 16 - (row * 23);\n            let x = BAG_X + 6;\n            let icon = game.add.image(x,y, creatureName + 'Icon');\n            let text = game.add.text(x + 16, y, ' x ' + creatureCounts[creatureName], {font: 'Gloria Hallelujah', fill: FONT_COLOR, align: 'left', fontSize: '12px'});\n            text.anchor.setTo(0, 0.5);\n            text.fixedToCamera = true;\n            creatureCountText[creatureName] = text;\n            icon.fixedToCamera = true;\n            icon.anchor.setTo(0, 0.5);\n            ++row;\n        });\n        \n    }\n\n    function updateStatOverlay() {\n        coinText.x = COIN_STAT_X + 20;\n        coinText.y = COIN_STAT_Y.y; \n        coinText.text = ' x ' + gold + '/' + GOLD_TO_WIN;\n\n        for(let i = 0; i < heartGroup.children.length; ++i) {\n            let heart = heartGroup.getChildAt(i);\n            if(i < health) {\n                heart.visible = true\n            } else {\n                heart.visible = false;\n            }\n        }\n\n        // creature count text\n        Object.keys(creatureCountText).forEach((creatureName) => {\n            creatureCountText[creatureName].text = ' x ' + creatureCounts[creatureName];\n        }); \n\n        // items\n        Object.keys(inventory).forEach((itemName) => {\n            if(inventory[itemName] < 1 || inventoryDisplay[itemName] || itemName === \"Swamp Bubble\") {\n                return;\n            }\n            let col = Object.keys(inventoryDisplay).length;\n            let itemIcon = game.add.image(ITEM_X + 18*col,ITEM_Y,ITEM_MAP[itemName].icon);\n            itemIcon.fixedToCamera = true;\n            itemIcon.anchor.setTo(0,0);\n            inventoryDisplay[itemName] = itemIcon;\n        });\n    }\n    \n    function updateShrek() {\n        if(inventory[\"Swamp Bubble\"] > 0) {\n            swampBubble.alpha = 0.6;\n        } else {\n            swampBubble.alpha = 0;\n        }\n\n        if(inventory[\"Fairie Dust\"] && !fairieDustEmitter) {\n            fairieDustEmitter = game.add.emitter(shrek.x, shrek.y-50, 200, 200);\n            fairieDustEmitter.makeParticles(\"fairieDust\");\n            fairieDustEmitter.flow(1000, 300, 1, -1);\n            fairieDustEmitter.alpha = .35;\n        }\n\n        if(isStoreOpen) {\n            game.physics.arcade.collide(shrek, groundPlatform);\n            shrek.body.velocity.x = 0;\n            return;\n        }\n        reanchorActionSprites();\n        if (shrek.hitTimer > 0) {\n            game.physics.arcade.collide(shrek, groundPlatform);\n            updateKnockedBackSprite(shrek);\n        } else {\n            updateShrekNormal();\n        }\n        swampBubble.x = shrek.x;\n        swampBubble.y = shrek.y;\n\n        if (fairieDustEmitter) {\n            fairieDustEmitter.x = shrek.x;\n            fairieDustEmitter.y = shrek.y-75;\n        }\n    }\n\n    function getShrekRunSpeed() {\n        return inventory[\"Speed\"] ? SHREK_BASE_SPEED * 2 : SHREK_BASE_SPEED;\n    }\n    \n\n\n    function updateShrekNormal() {\n\n        var isOnGround = game.physics.arcade.collide(shrek, groundPlatform);\n        //  Reset the players velocity (movement)\n        shrek.body.velocity.x = 0;\n        shrek.body.bounce.y = bouncing ? 0.7 : BOUNCE;\n\n        if (cursors.left.isDown)\n        {\n            if(!isShrekFacingLeft) {\n                flipShrek(); // flips shrek about the y axis\n                isShrekFacingLeft = true;\n            }\n            //  Move to the left\n            shrek.body.velocity.x = -getShrekRunSpeed();\n            shrek.animations.play('shrekWalk');\n        }\n        else if (cursors.right.isDown)\n        {\n            if(isShrekFacingLeft) {\n                flipShrek(); // flips shrek about the y axis\n                isShrekFacingLeft = false;\n            }\n            //  Move to the right\n            shrek.body.velocity.x = getShrekRunSpeed();\n            shrek.animations.play('shrekWalk');\n        } else {\n            shrek.frame = 0;\n        }\n\n        //  Allow the shrek to jump if they are touching the ground.\n        if (cursors.up.isDown) {\n            if(shrek.body.touching.down && isOnGround) {\n                shrek.body.velocity.y = -SHREK_BASE_JUMP_SPEED;\n            } else if(!doubleJumped && !jumpKeyWasPressed && inventory[\"Fart in a Jar\"] > 0) {\n                shrek.body.velocity.y = -SHREK_BASE_JUMP_SPEED;\n                doubleJumped = true;\n                fartSound.play();\n            }\n            jumpKeyWasPressed = true;\n        } else {\n            jumpKeyWasPressed = false;\n        }\n        // bounce logic\n        if (isOnGround) {\n            if (bouncing) {\n                bubbleBounceSound.play();\n            }\n            bouncing = false;\n            doubleJumped = false;\n        } else if(inventory[\"Fairie Dust\"]) {\n            shrek.body.gravity.y = GRAVITY / 2;\n        }\n        const currentDown = cursors.down.isDown;\n        if (currentDown && !lastDown && !isOnGround && bouncing === false && inventory[\"Swamp Bubble\"] === 1) {\n            shrek.body.velocity.y = 900*1.25;\n            bouncing = true;\n        }\n\n        enemies.forEach((enemy) => {\n            game.physics.arcade.overlap(shrek, enemy, onShrekHit, null, this);\n        });\n        lastDown = currentDown;\n    }\n\n    let lastDown = false;\n\n    function updateKnockedBackSprite(sprite) {\n        sprite.hitTimer--;\n        sprite.tint = sprite.hitTimer % 4 >= 2 ? '0xff6666' : '0xffffff';\n    }\n    \n    function updateCapturableEnemy(enemy) {\n        enemy.capturableTimer--;\n        enemy.alpha = enemy.capturableTimer % 4 >= 2 ? 0.1 : 1;\n    }\n\n    function updateEnemies() {\n        Object.keys(timeSinceEnemySpawn).forEach((enemyName) => {\n            let timeSinceSpawn = timeSinceEnemySpawn[enemyName]++;\n            let enemyProps = CreatureConstants.CREATURE_NAME_MAP[enemyName];\n            if(timeSinceSpawn > enemyProps.baseSpawnRate - (360 * level)) {\n                spawnEnemy(enemyProps);\n                timeSinceEnemySpawn[enemyName] = 0;\n            }\n        });\n        enemies.forEach((enemy) => {\n            var isOnGround = game.physics.arcade.collide(enemy, groundPlatform);\n\n            if(enemy.hitTimer > 0) {\n                updateKnockedBackSprite(enemy);\n                return;\n            }\n\n            if(enemy.health < 0 ) {\n                destroyEnemy(enemy);\n                return;\n            }\n\n            if(enemy.health === 0) {\n                updateCapturableEnemy(enemy);\n                // enemies are capturable only for a limited duration\n                if(enemy.capturableTimer === 0) {\n                    enemy.health = 1;\n                    enemy.alpha = 1;\n                }\n            }\n\n            if(enemy.pauseTimer > 0) {\n                enemy.pauseTimer--;\n                return;\n            }\n            let speed = getEnemySpeedFromLevel(enemy.template);\n            if(enemy.health === 0) {\n                speed /= 2;\n            }\n\n            if(enemy.x > STORE_X - STORE_RADIUS && enemy.x < STORE_X) {\n                enemy.body.velocity.x = -speed;\n                if(enemy.direction === 1) {\n                    flipSpriteDirection(enemy);\n                }\n                enemy.direction = -1;\n                return;\n            } else if(enemy.x < STORE_X + STORE_RADIUS && enemy.x > STORE_X) {\n                if(enemy.direction === -1) {\n                    flipSpriteDirection(enemy);\n                }\n                enemy.body.velocity.x = speed;\n                enemy.direction = 1;\n                return;\n            }\n\n            enemy.body.velocity.x = speed * enemy.direction;\n            enemy.animations.play(enemy.name + 'Walk');\n            if(Math.random() < enemy.template.turnProb) {\n                enemy.direction *= -1;\n                flipSpriteDirection(enemy);\n            }\n                //  Allow the enemy to jump if they are touching the ground.\n            if (enemy.body.touching.down && isOnGround) {\n                if(Math.random() * 1000 > 992) {\n                    enemy.body.velocity.y = -SHREK_BASE_JUMP_SPEED;\n                }\n            }\n        });\n    }\n\n    function reanchorActionSprites() {\n        Object.keys(actionSprites).forEach(\n            (actionSpriteName) => anchorActionSprite(actionSprites[actionSpriteName].sprite));\n    }\n\n    function onShrekHit(shrek, enemy) {\n        enemy.body.velocity.x = 0;\n        enemy.body.velocity.y = 0;\n        enemy.pauseTimer = SHREK_KNOCKBACK_TIME / 2;\n        knockbackSprite(shrek, enemy);\n        if(inventory[\"Swamp Bubble\"] > 0) {\n            inventory[\"Swamp Bubble\"] = inventory[\"Swamp Bubble\"] - 1;\n            bubblePopSound.play();\n            return;\n        }\n        health--;\n        if(health < 1) {\n            loserFartSound.play();\n            musicIntro.stop();\n            musicLoop.stop();\n            game.state.start(\"GameOver\");\n        }\n    }\n\n    function knockbackSprite(sprite, adversary) {\n        sprite.hitTimer = SHREK_KNOCKBACK_TIME;\n        const template = sprite.template || {};\n        let kbX = template.knockbackVelocityX;\n        let kbY = template.knockbackVelocityY;\n        if (adversary === shrek && inventory[\"Big Onion\"] === 1) {\n            kbX *= 1;\n            kbY *= 5;\n        }\n        let velocityX = kbX !== undefined ? kbX : SHREK_KNOCKBACK_SPEED;\n        let velocityY = kbY !== undefined ? kbY : -SHREK_KNOCKBACK_SPEED;\n        sprite.body.velocity.x = (adversary.body.x > sprite.body.x ? -velocityX : velocityX);\n        sprite.body.velocity.y = velocityY;\n    }\n\n    function animateAction(actionSpriteName) {\n        if(isShrekActing) {\n            return;\n        }\n        isShrekActing = true;\n        let actionSprite = actionSprites[actionSpriteName].sprite;\n        let animationName = actionSprites[actionSpriteName].animationName;\n        actionSprite.alpha = 1;\n        let frameWidth = actionSprite.animations.currentFrame.width;\n        let xPercent = ((frameWidth) - actionArmFromRight) / (frameWidth);\n        actionSprite.anchor.setTo(xPercent, 0.5);\n        anchorActionSprite(actionSprite);\n        let anim = actionSprite.animations.play(animationName);\n        anim.onComplete.add(() => {isShrekActing = false;});\n    }\n\n    // flips sprite about the y-axis\n    function flipSpriteDirection(sprite) {\n        sprite.scale.x *= -1\n    }\n    \n    function flipShrek() {\n        flipSpriteDirection(shrek);\n        Object.keys(actionSprites).forEach(\n            (actionSpriteName) => flipSpriteDirection(actionSprites[actionSpriteName].sprite));\n    }\n\n    function anchorActionSprite(actionSprite) {\n        let armAnchor = getShrekActionAnchor();\n        actionSprite.x = armAnchor.anchorX;\n        actionSprite.y = armAnchor.anchorY;\n    }\n\n    function getShrekActionAnchor() {\n        let anchorX = isShrekFacingLeft? shrek.x - 17 : shrek.x + 17;\n        let anchorY = shrek.y - 52;\n        return {anchorX, anchorY};\n    }\n\n    function camera_izeCoordinates(x,y) {\n        return {\n            x: game.camera.x + x,\n            y: game.camera.y +y\n        };\n    }\n\n    function getEnemySpeedFromLevel(enemyTemplate) {\n        return enemyTemplate.baseSpeed + 20 * level;\n    }\n\n    function checkNetCollision() {\n        const net = actionSprites['net'];\n        const netSprite = net.sprite;\n        enemies.forEach((enemy) => {\n            if (net.collidedEnemies.length >= 1 || Object.keys(capturedCreatures).includes(enemy.name) || enemy.health > 0) {\n                return;\n            }\n            const foundCollision = Phaser.Rectangle.intersects(enemy.getBounds(), netSprite.getBounds());\n            if (foundCollision) {\n                net.collidedEnemies.push(enemy);\n                creatureCounts[enemy.name] += 1;\n                capturedCreatures.push(enemy.template);\n                destroyEnemy(enemy)\n                netCaptureSound.play();\n            }\n        });\n        \n    }\n\n    const checkChopCollision = (isBigFist) => {\n        const chop = isBigFist ? actionSprites['bigfist'] : actionSprites['chop'];\n        const chopSprite = chop.sprite;\n\n        enemies.forEach((enemy) => {\n            if (chop.collidedEnemies.includes(enemy)) {\n                return;\n            }\n            const foundCollision = Phaser.Rectangle.intersects(enemy.getBounds(), chopSprite.getBounds());\n            if (foundCollision) {\n                isBigFist ? hitBigSound.play() : hitSound.play();\n                chop.collidedEnemies.push(enemy);\n                const hadZeroHealth = enemy.health === 0;\n                const damageDealt = isBigFist ? 4 : 1;\n                enemy.health -= damageDealt;\n                knockbackSprite(enemy, shrek);\n\n                // at least one hit needs to make enemy capturable\n                if (!hadZeroHealth && enemy.health < 0) { \n                    enemy.health = 0; \n                }\n                if (enemy.health === 0) {\n                    enemy.capturableTimer = CAPTURABLE_DURATION * (isBigFist ? 3 : 1);\n                }\n            }\n        });\n    }\n\n    function destroyEnemy(enemy) {\n        enemies.splice(enemies.indexOf(enemy), 1);\n        enemy.destroy();\n    }\n\n    function getLevelFromEnemiesSold() {\n        if(enemiesSold < 10) {\n            return 0;\n        } else if(enemiesSold < 20) {\n            return 1;\n        } else if(enemiesSold < 30) {\n            return 2;\n        } else if(enemiesSold < 50) {\n            return 3;\n        } else {\n            return 4;\n        }\n    }\n\n    function hasBoughtAllItems() {\n        for(let i = 0; i < Object.keys(inventory).length; ++i) {\n            let itemName = Object.keys(inventory)[i];\n            if(itemName === \"Swamp Bubble\") {\n                if(!hasBoughtBubble) {\n                    return false;\n                }\n            } else if(inventory[itemName] < 1) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    return {preload, create, update};\n}","import {MARGIN} from \"../common/constants\";\nexport default function StoreMenu(game) {\n\n    var menuContainer;\n    var width = game.width - MARGIN * 2 // example;\n    var height = game.height - MARGIN * 2 // example;\n\n    var bmd = game.add.bitmapData(width, height);\n     \n    bmd.ctx.beginPath();\n    bmd.ctx.rect(0, 0, width, height);\n    bmd.ctx.fillStyle = '#000000';\n    bmd.ctx.fill();\n    menuContainer = game.add.sprite(game.camera.x + (game.width/2), game.camera.y + (game.height/2), bmd);\n    menuContainer.anchor.setTo(0.5, 0.5);\n    menuContainer.bringToTop();\n    menuContainer.alpha = 0.75;  \n    return menuContainer;\n}","import {DescriptionStyle} from \"../common/constants\";\nimport StateTransitionButton from '../common/StateTransitionButton';\nimport TitleText from \"../common/TitleText\";\nexport default function victoryState(game) {\n\n    function create() {\n        TitleText(game, game.width/2, 90, 'Victory!');\n        StateTransitionButton(game, 60, 30, '< Back', \"Entry\");\n        game.add.text(60, 120, \"You can buy back your swamp! And all it took was the lives\\nof a few fairy tale creatures!\", DescriptionStyle);\n    }\n    \n    return {create};\n}"],"sourceRoot":""}